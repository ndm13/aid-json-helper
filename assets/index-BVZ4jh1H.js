var De=Object.defineProperty;var Ge=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var he=(e,t,n)=>(Ge(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function ee(){}function Re(e){return e()}function Le(){return Object.create(null)}function D(e){e.forEach(Re)}function Ie(e){return typeof e=="function"}function Me(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function He(e){return Object.keys(e).length===0}function o(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function b(){return R(" ")}function Qe(){return R("")}function S(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xe(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.data!==t&&(e.data=t)}function F(e,t){e.value=t??""}function Ee(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function Ye(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function Se(e,t,n){e.classList.toggle(t,!!n)}let ye;function ie(e){ye=e}const Y=[],Ne=[];let x=[];const je=[],Ze=Promise.resolve();let ge=!1;function xe(){ge||(ge=!0,Ze.then(qe))}function te(e){x.push(e)}const pe=new Set;let X=0;function qe(){if(X!==0)return;const e=ye;do{try{for(;X<Y.length;){const t=Y[X];X++,ie(t),et(t.$$)}}catch(t){throw Y.length=0,X=0,t}for(ie(null),Y.length=0,X=0;Ne.length;)Ne.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];pe.has(n)||(pe.add(n),n())}x.length=0}while(Y.length);for(;je.length;)je.pop()();ge=!1,pe.clear(),ie(e)}function et(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function tt(e){const t=[],n=[];x.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),x=t}const ce=new Set;let z;function nt(){z={r:0,c:[],p:z}}function lt(){z.r||D(z.c),z=z.p}function oe(e,t){e&&e.i&&(ce.delete(e),e.i(t))}function me(e,t,n,l){if(e&&e.o){if(ce.has(e))return;ce.add(e),z.c.push(()=>{ce.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Z(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function rt(e){e&&e.c()}function Je(e,t,n){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),te(()=>{const i=e.$$.on_mount.map(Re).filter(Ie);e.$$.on_destroy?e.$$.on_destroy.push(...i):D(i),e.$$.on_mount=[]}),r.forEach(te)}function Ve(e,t){const n=e.$$;n.fragment!==null&&(tt(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function it(e,t){e.$$.dirty[0]===-1&&(Y.push(e),xe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ke(e,t,n,l,r,i,s=null,p=[-1]){const C=ye;ie(e);const f=e.$$={fragment:null,ctx:[],props:i,update:ee,not_equal:r,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(C?C.$$.context:[])),callbacks:Le(),dirty:p,skip_bound:!1,root:t.target||C.$$.root};s&&s(f.root);let w=!1;if(f.ctx=n?n(e,t.props||{},(h,N,...k)=>{const j=k.length?k[0]:N;return f.ctx&&r(f.ctx[h],f.ctx[h]=j)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](j),w&&it(e,h)),N}):[],f.update(),w=!0,D(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const h=Xe(t.target);f.fragment&&f.fragment.l(h),h.forEach($)}else f.fragment&&f.fragment.c();t.intro&&oe(e.$$.fragment),Je(e,t.target,t.anchor),qe()}ie(C)}class We{constructor(){he(this,"$$");he(this,"$$set")}$destroy(){Ve(this,1),this.$destroy=ee}$on(t,n){if(!Ie(n))return ee;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!He(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ot="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ot);function Ae(e,t,n){const l=e.slice();return l[8]=t[n],l}function st(e){let t,n=Z(e[0].keys.split(",")),l=[];for(let r=0;r<n.length;r+=1)l[r]=Fe(Ae(e,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();t=Qe()},m(r,i){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,i);P(r,t,i)},p(r,i){if(i&1){n=Z(r[0].keys.split(","));let s;for(s=0;s<n.length;s+=1){const p=Ae(r,n,s);l[s]?l[s].p(p,i):(l[s]=Fe(p),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(r){r&&$(t),_e(l,r)}}}function ut(e){let t;return{c(){t=d("em"),t.textContent="No Triggers!"},m(n,l){P(n,t,l)},p:ee,d(n){n&&$(t)}}}function ft(e){let t,n,l;return{c(){t=d("input"),a(t,"type","text")},m(r,i){P(r,t,i),F(t,e[0].keys),n||(l=S(t,"input",e[6]),n=!0)},p(r,i){i&1&&t.value!==r[0].keys&&F(t,r[0].keys)},d(r){r&&$(t),n=!1,l()}}}function Fe(e){let t,n=e[8]+"",l;return{c(){t=d("kbd"),l=R(n),a(t,"class","svelte-1ue2u6c")},m(r,i){P(r,t,i),o(t,l)},p(r,i){i&1&&n!==(n=r[8]+"")&&se(l,n)},d(r){r&&$(t)}}}function ct(e){let t,n,l,r,i,s,p,C,f,w,h,N,k,j,I,M,q,L=e[1]?"✔":"✎",v,_,A;function U(y,T){return y[1]?ft:y[0].keys.length===0?ut:st}let V=U(e),O=V(e);return{c(){t=d("section"),n=d("header"),l=d("button"),r=R("✨"),s=b(),p=d("h3"),p.textContent="Placeholder Title",C=b(),f=d("span"),f.textContent="Placeholder Type",w=b(),h=d("textarea"),N=b(),k=d("div"),j=d("h4"),j.textContent="Triggers:",I=b(),O.c(),M=b(),q=d("button"),v=R(L),a(l,"title",i="Use for Character Creator [currently "+e[0].useForCharacterCreation+"]"),a(l,"class","svelte-1ue2u6c"),Se(l,"is_cc",e[0].useForCharacterCreation),a(p,"contenteditable","true"),a(p,"class","title svelte-1ue2u6c"),e[0].title===void 0&&te(()=>e[3].call(p)),a(f,"contenteditable","true"),a(f,"class","type svelte-1ue2u6c"),e[0].type===void 0&&te(()=>e[4].call(f)),a(n,"class","svelte-1ue2u6c"),a(h,"class","value svelte-1ue2u6c"),a(j,"class","svelte-1ue2u6c"),a(k,"class","triggers svelte-1ue2u6c"),a(t,"class","svelte-1ue2u6c")},m(y,T){P(y,t,T),o(t,n),o(n,l),o(l,r),o(n,s),o(n,p),e[0].title!==void 0&&(p.innerText=e[0].title),o(n,C),o(n,f),e[0].type!==void 0&&(f.innerText=e[0].type),o(t,w),o(t,h),F(h,e[0].value),o(t,N),o(t,k),o(k,j),o(k,I),O.m(k,null),o(k,M),o(k,q),o(q,v),_||(A=[S(l,"click",e[2]),S(p,"input",e[3]),S(f,"input",e[4]),S(h,"input",e[5]),S(q,"click",e[7])],_=!0)},p(y,[T]){T&1&&i!==(i="Use for Character Creator [currently "+y[0].useForCharacterCreation+"]")&&a(l,"title",i),T&1&&Se(l,"is_cc",y[0].useForCharacterCreation),T&1&&y[0].title!==p.innerText&&(p.innerText=y[0].title),T&1&&y[0].type!==f.innerText&&(f.innerText=y[0].type),T&1&&F(h,y[0].value),V===(V=U(y))&&O?O.p(y,T):(O.d(1),O=V(y),O&&(O.c(),O.m(k,M))),T&2&&L!==(L=y[1]?"✔":"✎")&&se(v,L)},i:ee,o:ee,d(y){y&&$(t),O.d(),_=!1,D(A)}}}function at(e,t,n){let{card:l}=t,r=!1;const i=()=>{n(0,l.useForCharacterCreation=!l.useForCharacterCreation,l)};function s(){l.title=this.innerText,n(0,l)}function p(){l.type=this.innerText,n(0,l)}function C(){l.value=this.value,n(0,l)}function f(){l.keys=this.value,n(0,l)}const w=()=>{n(1,r=!r)};return e.$$set=h=>{"card"in h&&n(0,l=h.card)},[l,r,i,s,p,C,f,w]}class dt extends We{constructor(t){super(),Ke(this,t,at,ct,Me,{card:0})}}function $e(e,t,n){const l=e.slice();return l[17]=t[n],l}function Pe(e,t,n){const l=e.slice();return l[20]=t[n],l}function Ue(e){let t,n=e[20]+"",l,r;return{c(){t=d("option"),l=R(n),t.selected=!0,t.__value=r=e[20],F(t,t.__value)},m(i,s){P(i,t,s),o(t,l)},p(i,s){s&64&&n!==(n=i[20]+"")&&se(l,n),s&64&&r!==(r=i[20])&&(t.__value=r,F(t,t.__value))},d(i){i&&$(t)}}}function Be(e){let t,n;return t=new dt({props:{card:e[17]}}),{c(){rt(t.$$.fragment)},m(l,r){Je(t,l,r),n=!0},p(l,r){const i={};r&128&&(i.card=l[17]),t.$set(i)},i(l){n||(oe(t.$$.fragment,l),n=!0)},o(l){me(t.$$.fragment,l),n=!1},d(l){Ve(t,l)}}}function ht(e){let t,n,l,r,i,s,p,C,f,w,h,N=e[7].length+"",k,j,I=e[0].length+"",M,q,L,v,_,A,U,V,O,y,T,ve,ne,be,K,Ce,J,le,we,B,ke,ue,Te,fe,ae,G,H,de,Oe,Q=Z(e[6]),E=[];for(let u=0;u<Q.length;u+=1)E[u]=Ue(Pe(e,Q,u));let W=Z(e[7]),m=[];for(let u=0;u<W.length;u+=1)m[u]=Be($e(e,W,u));const ze=u=>me(m[u],1,1,()=>{m[u]=null});return{c(){t=d("header"),n=d("h2"),n.textContent="Story Card Viewer/Editor",l=b(),r=d("section"),i=d("input"),s=b(),p=d("button"),p.textContent="Save",C=b(),f=d("nav"),w=d("em"),h=R("Showing "),k=R(N),j=R(" entries out of "),M=R(I),q=b(),L=d("section"),v=d("fieldset"),_=d("label"),_.textContent="Title:",A=b(),U=d("input"),V=b(),O=d("label"),O.textContent="Entry:",y=b(),T=d("input"),ve=b(),ne=d("label"),ne.textContent="Trigger:",be=b(),K=d("input"),Ce=b(),J=d("fieldset"),le=d("label"),le.textContent="Type:",we=b(),B=d("select");for(let u=0;u<E.length;u+=1)E[u].c();ke=b(),ue=d("button"),ue.textContent="Clear Types",Te=b(),fe=d("button"),fe.textContent="Clear Filters",ae=b(),G=d("main");for(let u=0;u<m.length;u+=1)m[u].c();a(i,"accept","application/json,text/json,.json"),a(i,"type","file"),a(r,"class","io svelte-dfafig"),a(t,"class","svelte-dfafig"),a(_,"for","title"),a(_,"class","svelte-dfafig"),a(U,"name","title"),a(O,"for","entry"),a(O,"class","svelte-dfafig"),a(T,"name","entry"),a(ne,"for","triggers"),a(ne,"class","svelte-dfafig"),a(K,"name","triggers"),a(v,"class","searchWithin svelte-dfafig"),a(le,"for","type"),a(le,"class","svelte-dfafig"),a(B,"name","type"),B.multiple=!0,e[1]===void 0&&te(()=>e[15].call(B)),a(J,"class","type svelte-dfafig"),a(L,"class","filter svelte-dfafig"),a(f,"class","svelte-dfafig"),a(G,"class","svelte-dfafig")},m(u,g){P(u,t,g),o(t,n),o(t,l),o(t,r),o(r,i),o(r,s),o(r,p),P(u,C,g),P(u,f,g),o(f,w),o(w,h),o(w,k),o(w,j),o(w,M),o(f,q),o(f,L),o(L,v),o(v,_),o(v,A),o(v,U),F(U,e[2]),o(v,V),o(v,O),o(v,y),o(v,T),F(T,e[3]),o(v,ve),o(v,ne),o(v,be),o(v,K),F(K,e[4]),o(L,Ce),o(L,J),o(J,le),o(J,we),o(J,B);for(let c=0;c<E.length;c+=1)E[c]&&E[c].m(B,null);Ee(B,e[1]),o(J,ke),o(J,ue),o(L,Te),o(L,fe),P(u,ae,g),P(u,G,g);for(let c=0;c<m.length;c+=1)m[c]&&m[c].m(G,null);H=!0,de||(Oe=[S(i,"change",e[11]),S(i,"change",e[9]),S(p,"click",e[10]),S(U,"input",e[12]),S(T,"input",e[13]),S(K,"input",e[14]),S(B,"change",e[15]),S(ue,"click",e[16]),S(fe,"click",e[8])],de=!0)},p(u,[g]){if((!H||g&128)&&N!==(N=u[7].length+"")&&se(k,N),(!H||g&1)&&I!==(I=u[0].length+"")&&se(M,I),g&4&&U.value!==u[2]&&F(U,u[2]),g&8&&T.value!==u[3]&&F(T,u[3]),g&16&&K.value!==u[4]&&F(K,u[4]),g&64){Q=Z(u[6]);let c;for(c=0;c<Q.length;c+=1){const re=Pe(u,Q,c);E[c]?E[c].p(re,g):(E[c]=Ue(re),E[c].c(),E[c].m(B,null))}for(;c<E.length;c+=1)E[c].d(1);E.length=Q.length}if(g&66&&Ee(B,u[1]),g&128){W=Z(u[7]);let c;for(c=0;c<W.length;c+=1){const re=$e(u,W,c);m[c]?(m[c].p(re,g),oe(m[c],1)):(m[c]=Be(re),m[c].c(),oe(m[c],1),m[c].m(G,null))}for(nt(),c=W.length;c<m.length;c+=1)ze(c);lt()}},i(u){if(!H){for(let g=0;g<W.length;g+=1)oe(m[g]);H=!0}},o(u){m=m.filter(Boolean);for(let g=0;g<m.length;g+=1)me(m[g]);H=!1},d(u){u&&($(t),$(C),$(f),$(ae),$(G)),_e(E,u),_e(m,u),de=!1,D(Oe)}}}function pt(e,t,n){let l,r;const i=[];let s=[],p="",C="",f="";function w(){n(2,p=n(3,C=n(4,f=""))),n(1,s.length=0,s),s.push(...l)}let h;async function N(){h&&await h[0].text().then(_=>JSON.parse(_)).then(_=>{n(0,i.length=0,i),i.push(..._),n(6,l.length=0,l),l.push(...new Set(i.map(A=>A.type))),w(),i.length===0&&alert("This file doesn't contain any story cards!  Make sure you have the right file.")}).catch(_=>{n(0,i.length=0,i),w(),alert("There was an error trying to load this file.  Are you sure it's valid?"),console.error("Caught error when updating file",_)})}function k(){const _=document.createElement("a"),A=URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"}));_.download=h?h[0].name:"cards.json",_.href=A,_.click(),URL.revokeObjectURL(A)}function j(){h=this.files,n(5,h)}function I(){p=this.value,n(2,p)}function M(){C=this.value,n(3,C)}function q(){f=this.value,n(4,f)}function L(){s=Ye(this),n(1,s),n(6,l)}const v=()=>n(1,s.length=0,s);return e.$$.update=()=>{e.$$.dirty&31&&n(7,r=i.filter(_=>s.indexOf(_.type)>-1&&_.title.toLowerCase().indexOf(p.toLowerCase())>-1&&_.value.toLowerCase().indexOf(C.toLowerCase())>-1&&_.keys.split(",").filter(A=>A.toLowerCase().indexOf(f.toLowerCase())>-1).length>0))},n(6,l=[]),[i,s,p,C,f,h,l,r,w,N,k,j,I,M,q,L,v]}class _t extends We{constructor(t){super(),Ke(this,t,pt,ht,Me,{})}}new _t({target:document.getElementById("app")});
