var ct=Object.defineProperty;var at=(e,t,n)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Te=(e,t,n)=>(at(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function ue(){}function xe(e){return e()}function Me(){return Object.create(null)}function ee(e){e.forEach(xe)}function et(e){return typeof e=="function"}function tt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ft(e){return Object.keys(e).length===0}function o(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function Le(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function y(){return I(" ")}function nt(){return I("")}function T(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function s(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ht(e){return Array.from(e.childNodes)}function ce(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t){e.value=t??""}function qe(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function dt(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function He(e,t,n){e.classList.toggle(t,!!n)}let Ne;function me(e){Ne=e}const ie=[],Je=[];let se=[];const Ve=[],pt=Promise.resolve();let Ee=!1;function _t(){Ee||(Ee=!0,pt.then(lt))}function ae(e){se.push(e)}const Oe=new Set;let re=0;function lt(){if(re!==0)return;const e=Ne;do{try{for(;re<ie.length;){const t=ie[re];re++,me(t),gt(t.$$)}}catch(t){throw ie.length=0,re=0,t}for(me(null),ie.length=0,re=0;Je.length;)Je.pop()();for(let t=0;t<se.length;t+=1){const n=se[t];Oe.has(n)||(Oe.add(n),n())}se.length=0}while(ie.length);for(;Ve.length;)Ve.pop()();Ee=!1,Oe.clear(),me(e)}function gt(e){if(e.fragment!==null){e.update(),ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}function mt(e){const t=[],n=[];se.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),se=t}const Ce=new Set;let x;function yt(){x={r:0,c:[],p:x}}function bt(){x.r||ee(x.c),x=x.p}function ye(e,t){e&&e.i&&(Ce.delete(e),e.i(t))}function Se(e,t,n,l){if(e&&e.o){if(Ce.has(e))return;Ce.add(e),x.c.push(()=>{Ce.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function vt(e){e&&e.c()}function rt(e,t,n){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),ae(()=>{const i=e.$$.on_mount.map(xe).filter(et);e.$$.on_destroy?e.$$.on_destroy.push(...i):ee(i),e.$$.on_mount=[]}),r.forEach(ae)}function it(e,t){const n=e.$$;n.fragment!==null&&(mt(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(e,t){e.$$.dirty[0]===-1&&(ie.push(e),_t(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ot(e,t,n,l,r,i,u=null,p=[-1]){const w=Ne;me(e);const a=e.$$={fragment:null,ctx:[],props:i,update:ue,not_equal:r,bound:Me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(w?w.$$.context:[])),callbacks:Me(),dirty:p,skip_bound:!1,root:t.target||w.$$.root};u&&u(a.root);let C=!1;if(a.ctx=n?n(e,t.props||{},(b,S,..._)=>{const F=_.length?_[0]:S;return a.ctx&&r(a.ctx[b],a.ctx[b]=F)&&(!a.skip_bound&&a.bound[b]&&a.bound[b](F),C&&Ct(e,b)),S}):[],a.update(),C=!0,ee(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const b=ht(t.target);a.fragment&&a.fragment.l(b),b.forEach(E)}else a.fragment&&a.fragment.c();t.intro&&ye(e.$$.fragment),rt(e,t.target,t.anchor),lt()}me(w)}class st{constructor(){Te(this,"$$");Te(this,"$$set")}$destroy(){it(this,1),this.$destroy=ue}$on(t,n){if(!et(n))return ue;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!ft(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kt);function We(e,t,n){const l=e.slice();return l[11]=t[n],l}function wt(e){let t,n=oe(e[0].keys.split(",")),l=[];for(let r=0;r<n.length;r+=1)l[r]=Ye(We(e,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();t=nt()},m(r,i){for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(r,i);N(r,t,i)},p(r,i){if(i&1){n=oe(r[0].keys.split(","));let u;for(u=0;u<n.length;u+=1){const p=We(r,n,u);l[u]?l[u].p(p,i):(l[u]=Ye(p),l[u].c(),l[u].m(t.parentNode,t))}for(;u<l.length;u+=1)l[u].d(1);l.length=n.length}},d(r){r&&E(t),Le(l,r)}}}function jt(e){let t;return{c(){t=f("em"),t.textContent="No Triggers!"},m(n,l){N(n,t,l)},p:ue,d(n){n&&E(t)}}}function Tt(e){let t,n,l;return{c(){t=f("input"),s(t,"type","text")},m(r,i){N(r,t,i),B(t,e[0].keys),n||(l=T(t,"input",e[7]),n=!0)},p(r,i){i&1&&t.value!==r[0].keys&&B(t,r[0].keys)},d(r){r&&E(t),n=!1,l()}}}function Ye(e){let t,n=e[11]+"",l;return{c(){t=f("kbd"),l=I(n),s(t,"class","svelte-oybtug")},m(r,i){N(r,t,i),o(t,l)},p(r,i){i&1&&n!==(n=r[11]+"")&&ce(l,n)},d(r){r&&E(t)}}}function Ke(e){let t,n,l;return{c(){t=f("textarea"),s(t,"class","description svelte-oybtug")},m(r,i){N(r,t,i),B(t,e[0].description),n||(l=T(t,"input",e[10]),n=!0)},p(r,i){i&1&&B(t,r[0].description)},d(r){r&&E(t),n=!1,l()}}}function Ot(e){let t,n,l,r,i,u,p,w,a,C,b,S,_,F,W,Y,q,A=e[1]?"✔":"✎",k,H,M,P=e[2]?"Hide":"Show",G,g,$,R,fe;function Q(d,O){return d[1]?Tt:d[0].keys.length===0?jt:wt}let Z=Q(e),j=Z(e),L=e[2]&&Ke(e);return{c(){t=f("section"),n=f("header"),l=f("button"),r=I("✨"),u=y(),p=f("h3"),p.textContent="Placeholder Title",w=y(),a=f("span"),a.textContent="Placeholder Type",C=y(),b=f("textarea"),S=y(),_=f("div"),F=f("h4"),F.textContent="Triggers:",W=y(),j.c(),Y=y(),q=f("button"),k=I(A),H=y(),M=f("button"),G=I(P),g=I(" Description"),$=y(),L&&L.c(),s(l,"title",i="Use for Character Creator [currently "+e[0].useForCharacterCreation+"]"),s(l,"class","svelte-oybtug"),He(l,"is_cc",e[0].useForCharacterCreation),s(p,"contenteditable","true"),s(p,"class","title svelte-oybtug"),e[0].title===void 0&&ae(()=>e[4].call(p)),s(a,"contenteditable","true"),s(a,"class","type svelte-oybtug"),e[0].type===void 0&&ae(()=>e[5].call(a)),s(n,"class","svelte-oybtug"),s(b,"class","value svelte-oybtug"),s(F,"class","svelte-oybtug"),s(q,"class","svelte-oybtug"),s(M,"class","svelte-oybtug"),s(_,"class","triggers svelte-oybtug"),s(t,"class","svelte-oybtug")},m(d,O){N(d,t,O),o(t,n),o(n,l),o(l,r),o(n,u),o(n,p),e[0].title!==void 0&&(p.innerText=e[0].title),o(n,w),o(n,a),e[0].type!==void 0&&(a.innerText=e[0].type),o(t,C),o(t,b),B(b,e[0].value),o(t,S),o(t,_),o(_,F),o(_,W),j.m(_,null),o(_,Y),o(_,q),o(q,k),o(_,H),o(_,M),o(M,G),o(M,g),o(t,$),L&&L.m(t,null),R||(fe=[T(l,"click",e[3]),T(p,"input",e[4]),T(a,"input",e[5]),T(b,"input",e[6]),T(q,"click",e[8]),T(M,"click",e[9])],R=!0)},p(d,[O]){O&1&&i!==(i="Use for Character Creator [currently "+d[0].useForCharacterCreation+"]")&&s(l,"title",i),O&1&&He(l,"is_cc",d[0].useForCharacterCreation),O&1&&d[0].title!==p.innerText&&(p.innerText=d[0].title),O&1&&d[0].type!==a.innerText&&(a.innerText=d[0].type),O&1&&B(b,d[0].value),Z===(Z=Q(d))&&j?j.p(d,O):(j.d(1),j=Z(d),j&&(j.c(),j.m(_,Y))),O&2&&A!==(A=d[1]?"✔":"✎")&&ce(k,A),O&4&&P!==(P=d[2]?"Hide":"Show")&&ce(G,P),d[2]?L?L.p(d,O):(L=Ke(d),L.c(),L.m(t,null)):L&&(L.d(1),L=null)},i:ue,o:ue,d(d){d&&E(t),j.d(),L&&L.d(),R=!1,ee(fe)}}}function Lt(e,t,n){let{card:l}=t,r=!1,i=!1;const u=()=>{n(0,l.useForCharacterCreation=!l.useForCharacterCreation,l)};function p(){l.title=this.innerText,n(0,l)}function w(){l.type=this.innerText,n(0,l)}function a(){l.value=this.value,n(0,l)}function C(){l.keys=this.value,n(0,l)}const b=()=>{n(1,r=!r)},S=()=>{n(2,i=!i)};function _(){l.description=this.value,n(0,l)}return e.$$set=F=>{"card"in F&&n(0,l=F.card)},[l,r,i,u,p,w,a,C,b,S,_]}class Et extends st{constructor(t){super(),ot(this,t,Lt,Ot,tt,{card:0})}}function ze(e,t,n){const l=e.slice();return l[21]=t[n],l}function Ge(e,t,n){const l=e.slice();return l[24]=t[n],l}function Qe(e){let t,n=e[24]+"",l,r;return{c(){t=f("option"),l=I(n),t.selected=!0,t.__value=r=e[24],B(t,t.__value)},m(i,u){N(i,t,u),o(t,l)},p(i,u){u&256&&n!==(n=i[24]+"")&&ce(l,n),u&256&&r!==(r=i[24])&&(t.__value=r,B(t,t.__value))},d(i){i&&E(t)}}}function Xe(e){let t;function n(i,u){return i[0].length===0?Ft:i[5]||i[6]?Nt:St}let l=n(e),r=l(e);return{c(){r.c(),t=nt()},m(i,u){r.m(i,u),N(i,t,u)},p(i,u){l!==(l=n(i))&&(r.d(1),r=l(i),r&&(r.c(),r.m(t.parentNode,t)))},d(i){i&&E(t),r.d(i)}}}function St(e){let t;return{c(){t=f("p"),t.textContent=`You've filtered everything out! To reset, click the "Clear Filters" button!`},m(n,l){N(n,t,l)},d(n){n&&E(t)}}}function Nt(e){let t;return{c(){t=f("p"),t.textContent="No errors found! You're good!"},m(n,l){N(n,t,l)},d(n){n&&E(t)}}}function Ft(e){let t;return{c(){t=f("p"),t.textContent=`Load some story cards to get started! Open a scenario or adventure, go to Edit > Details > Story Card
                Management, and export your story cards! When you're done editing, you can save them here and import
                them again in the same section.
            `},m(n,l){N(n,t,l)},d(n){n&&E(t)}}}function Ze(e){let t,n;return t=new Et({props:{card:e[21]}}),{c(){vt(t.$$.fragment)},m(l,r){rt(t,l,r),n=!0},p(l,r){const i={};r&512&&(i.card=l[21]),t.$set(i)},i(l){n||(ye(t.$$.fragment,l),n=!0)},o(l){Se(t.$$.fragment,l),n=!1},d(l){it(t,l)}}}function At(e){let t,n,l,r,i,u,p,w,a,C,b,S=e[9].length+"",_,F,W=e[0].length+"",Y,q,A,k,H,M,P,G,g,$,R,fe,Q,Z,j,L,d,O,Fe,J,Ae,be,Pe,ve,Ue,ke,De,te,he,K,$e,de,Be,pe,z,Re,_e,we,X,ne,je,Ie,le=oe(e[8]),U=[];for(let c=0;c<le.length;c+=1)U[c]=Qe(Ge(e,le,c));let V=oe(e[9]),v=[];for(let c=0;c<V.length;c+=1)v[c]=Ze(ze(e,V,c));const ut=c=>Se(v[c],1,1,()=>{v[c]=null});let D=null;return V.length||(D=Xe(e)),{c(){t=f("header"),n=f("h2"),n.textContent="Story Card Viewer/Editor",l=y(),r=f("section"),i=f("input"),u=y(),p=f("button"),p.textContent="Save",w=y(),a=f("nav"),C=f("em"),b=I("Showing "),_=I(S),F=I(" entries out of "),Y=I(W),q=y(),A=f("section"),k=f("fieldset"),H=f("label"),H.textContent="Title:",M=y(),P=f("input"),G=y(),g=f("label"),g.textContent="Entry:",$=y(),R=f("input"),fe=y(),Q=f("label"),Q.textContent="Trigger:",Z=y(),j=f("input"),L=y(),d=f("fieldset"),O=f("label"),O.textContent="Type:",Fe=y(),J=f("select");for(let c=0;c<U.length;c+=1)U[c].c();Ae=y(),be=f("button"),be.textContent="Clear Types",Pe=y(),ve=f("button"),ve.textContent="Clear Filters",Ue=y(),ke=f("small"),ke.textContent="Common Errors:",De=y(),te=f("section"),he=f("span"),K=f("input"),$e=y(),de=f("label"),de.textContent="Empty triggers",Be=y(),pe=f("span"),z=f("input"),Re=y(),_e=f("label"),_e.textContent="No Character Creator description",we=y(),X=f("main");for(let c=0;c<v.length;c+=1)v[c].c();D&&D.c(),s(i,"accept","application/json,text/json,.json"),s(i,"type","file"),s(r,"class","io svelte-rajci5"),s(t,"class","svelte-rajci5"),s(H,"for","title"),s(H,"class","svelte-rajci5"),s(P,"name","title"),s(P,"id","title"),s(g,"for","entry"),s(g,"class","svelte-rajci5"),s(R,"name","entry"),s(R,"id","entry"),s(Q,"for","triggers"),s(Q,"class","svelte-rajci5"),s(j,"name","triggers"),s(j,"id","triggers"),s(k,"class","searchWithin svelte-rajci5"),s(O,"for","type"),s(O,"class","svelte-rajci5"),s(J,"name","type"),J.multiple=!0,e[1]===void 0&&ae(()=>e[17].call(J)),s(d,"class","type svelte-rajci5"),s(A,"class","filter svelte-rajci5"),s(K,"title","Shows cards with empty or missing triggers. Empty triggers will cause cards to trigger constantly, while missing triggers will cause them to never trigger."),s(K,"type","checkbox"),s(K,"id","empty"),s(K,"name","empty"),s(de,"for","empty"),s(de,"class","svelte-rajci5"),s(z,"title","Shows cards that are shown in character creator, but have no description. This only applies if you use character creator!"),s(z,"type","checkbox"),s(z,"id","noDescription"),s(z,"name","noDescription"),s(_e,"for","noDescription"),s(_e,"class","svelte-rajci5"),s(te,"class","issues"),s(a,"class","svelte-rajci5"),s(X,"class","svelte-rajci5")},m(c,m){N(c,t,m),o(t,n),o(t,l),o(t,r),o(r,i),o(r,u),o(r,p),N(c,w,m),N(c,a,m),o(a,C),o(C,b),o(C,_),o(C,F),o(C,Y),o(a,q),o(a,A),o(A,k),o(k,H),o(k,M),o(k,P),B(P,e[2]),o(k,G),o(k,g),o(k,$),o(k,R),B(R,e[3]),o(k,fe),o(k,Q),o(k,Z),o(k,j),B(j,e[4]),o(A,L),o(A,d),o(d,O),o(d,Fe),o(d,J);for(let h=0;h<U.length;h+=1)U[h]&&U[h].m(J,null);qe(J,e[1]),o(d,Ae),o(d,be),o(A,Pe),o(A,ve),o(a,Ue),o(a,ke),o(a,De),o(a,te),o(te,he),o(he,K),K.checked=e[5],o(he,$e),o(he,de),o(te,Be),o(te,pe),o(pe,z),z.checked=e[6],o(pe,Re),o(pe,_e),N(c,we,m),N(c,X,m);for(let h=0;h<v.length;h+=1)v[h]&&v[h].m(X,null);D&&D.m(X,null),ne=!0,je||(Ie=[T(i,"change",e[13]),T(i,"change",e[11]),T(p,"click",e[12]),T(P,"input",e[14]),T(R,"input",e[15]),T(j,"input",e[16]),T(J,"change",e[17]),T(be,"click",e[18]),T(ve,"click",e[10]),T(K,"change",e[19]),T(z,"change",e[20])],je=!0)},p(c,[m]){if((!ne||m&512)&&S!==(S=c[9].length+"")&&ce(_,S),(!ne||m&1)&&W!==(W=c[0].length+"")&&ce(Y,W),m&4&&P.value!==c[2]&&B(P,c[2]),m&8&&R.value!==c[3]&&B(R,c[3]),m&16&&j.value!==c[4]&&B(j,c[4]),m&256){le=oe(c[8]);let h;for(h=0;h<le.length;h+=1){const ge=Ge(c,le,h);U[h]?U[h].p(ge,m):(U[h]=Qe(ge),U[h].c(),U[h].m(J,null))}for(;h<U.length;h+=1)U[h].d(1);U.length=le.length}if(m&258&&qe(J,c[1]),m&32&&(K.checked=c[5]),m&64&&(z.checked=c[6]),m&609){V=oe(c[9]);let h;for(h=0;h<V.length;h+=1){const ge=ze(c,V,h);v[h]?(v[h].p(ge,m),ye(v[h],1)):(v[h]=Ze(ge),v[h].c(),ye(v[h],1),v[h].m(X,null))}for(yt(),h=V.length;h<v.length;h+=1)ut(h);bt(),!V.length&&D?D.p(c,m):V.length?D&&(D.d(1),D=null):(D=Xe(c),D.c(),D.m(X,null))}},i(c){if(!ne){for(let m=0;m<V.length;m+=1)ye(v[m]);ne=!0}},o(c){v=v.filter(Boolean);for(let m=0;m<v.length;m+=1)Se(v[m]);ne=!1},d(c){c&&(E(t),E(w),E(a),E(we),E(X)),Le(U,c),Le(v,c),D&&D.d(),je=!1,ee(Ie)}}}function Pt(e,t,n){let l,r;const i=[];let u=[],p="",w="",a="",C=!1,b=!1;function S(){n(2,p=n(3,w=n(4,a=""))),n(1,u.length=0,u),u.push(...l)}let _;async function F(){_&&await _[0].text().then(g=>JSON.parse(g)).then(g=>{n(0,i.length=0,i),i.push(...g),n(8,l.length=0,l),l.push(...new Set(i.map($=>$.type))),S(),i.length===0&&alert("This file doesn't contain any story cards!  Make sure you have the right file.")}).catch(g=>{n(0,i.length=0,i),S(),alert("There was an error trying to load this file.  Are you sure it's valid?"),console.error("Caught error when updating file",g)})}function W(){const g=document.createElement("a"),$=URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"}));g.download=_?_[0].name:"cards.json",g.href=$,g.click(),URL.revokeObjectURL($)}function Y(){_=this.files,n(7,_)}function q(){p=this.value,n(2,p)}function A(){w=this.value,n(3,w)}function k(){a=this.value,n(4,a)}function H(){u=dt(this),n(1,u),n(8,l)}const M=()=>n(1,u.length=0,u);function P(){C=this.checked,n(5,C)}function G(){b=this.checked,n(6,b)}return e.$$.update=()=>{e.$$.dirty&127&&n(9,r=i.filter(g=>u.indexOf(g.type)>-1&&g.title.toLowerCase().indexOf(p.toLowerCase())>-1&&g.value.toLowerCase().indexOf(w.toLowerCase())>-1&&g.keys.split(",").filter($=>$.toLowerCase().indexOf(a.toLowerCase())>-1).length>0).filter(g=>!C&&!b||C&&g.keys.split(",").filter($=>/^\s*$/gm.test($)).length>0||b&&g.useForCharacterCreation==!0&&/^(\s*|Notes go here.)$/gm.test(g.description)))},n(8,l=[]),[i,u,p,w,a,C,b,_,l,r,S,F,W,Y,q,A,k,H,M,P,G]}class Ut extends st{constructor(t){super(),ot(this,t,Pt,At,tt,{})}}new Ut({target:document.getElementById("app")});
