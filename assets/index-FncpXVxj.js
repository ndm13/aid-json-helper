var Wt=Object.defineProperty;var qt=(e,t,n)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var it=(e,t,n)=>(qt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function te(){}function zt(e,t){for(const n in t)e[n]=t[n];return e}function Mt(e){return e()}function yt(){return Object.create(null)}function de(e){e.forEach(Mt)}function tt(e){return typeof e=="function"}function Be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Jt(e){return Object.keys(e).length===0}function We(e,...t){if(e==null){for(const l of t)l(void 0);return te}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Vt(e){let t;return We(e,n=>t=n)(),t}function xe(e,t,n){e.$$.on_destroy.push(We(t,n))}function Gt(e,t,n,l){if(e){const s=Bt(e,t,n,l);return e[0](s)}}function Bt(e,t,n,l){return e[1]&&l?zt(n.ctx.slice(),e[1](l(t))):n.ctx}function Kt(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],i=Math.max(t.dirty.length,s.length);for(let u=0;u<i;u+=1)r[u]=t.dirty[u]|s[u];return r}return t.dirty|s}return t.dirty}function Xt(e,t,n,l,s,r){if(s){const i=Bt(t,n,l,r);e.p(i,s)}}function Zt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Te(e,t,n){return e.set(n),t}function o(e,t){e.appendChild(t)}function F(e,t,n){e.insertBefore(t,n||null)}function H(e){e.parentNode&&e.parentNode.removeChild(e)}function Je(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function d(){return D(" ")}function Ve(){return D("")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Qt(e){let t;return{p(...n){t=n,t.forEach(l=>e.push(l))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function xt(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function x(e,t){e.value=t??""}function vt(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function en(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function je(e,t,n){e.classList.toggle(t,!!n)}function tn(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let qe;function Pe(e){qe=e}function nn(){if(!qe)throw new Error("Function called outside component initialization");return qe}function Rt(){const e=nn();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=tn(t,n,{cancelable:l});return s.slice().forEach(i=>{i.call(e,r)}),!r.defaultPrevented}return!0}}const De=[],kt=[];let He=[];const wt=[],ln=Promise.resolve();let ct=!1;function sn(){ct||(ct=!0,ln.then(Ut))}function Fe(e){He.push(e)}const at=new Set;let Oe=0;function Ut(){if(Oe!==0)return;const e=qe;do{try{for(;Oe<De.length;){const t=De[Oe];Oe++,Pe(t),on(t.$$)}}catch(t){throw De.length=0,Oe=0,t}for(Pe(null),De.length=0,Oe=0;kt.length;)kt.pop()();for(let t=0;t<He.length;t+=1){const n=He[t];at.has(n)||(at.add(n),n())}He.length=0}while(De.length);for(;wt.length;)wt.pop()();ct=!1,at.clear(),Pe(e)}function on(e){if(e.fragment!==null){e.update(),de(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Fe)}}function rn(e){const t=[],n=[];He.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),He=t}const et=new Set;let Ae;function ft(){Ae={r:0,c:[],p:Ae}}function ht(){Ae.r||de(Ae.c),Ae=Ae.p}function ee(e,t){e&&e.i&&(et.delete(e),e.i(t))}function he(e,t,n,l){if(e&&e.o){if(et.has(e))return;et.add(e),Ae.c.push(()=>{et.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function be(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ze(e){e&&e.c()}function Ye(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),Fe(()=>{const r=e.$$.on_mount.map(Mt).filter(tt);e.$$.on_destroy?e.$$.on_destroy.push(...r):de(r),e.$$.on_mount=[]}),s.forEach(Fe)}function Me(e,t){const n=e.$$;n.fragment!==null&&(rn(n.after_update),de(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function an(e,t){e.$$.dirty[0]===-1&&(De.push(e),sn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ge(e,t,n,l,s,r,i=null,u=[-1]){const h=qe;Pe(e);const f=e.$$={fragment:null,ctx:[],props:r,update:te,not_equal:s,bound:yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:yt(),dirty:u,skip_bound:!1,root:t.target||h.$$.root};i&&i(f.root);let y=!1;if(f.ctx=n?n(e,t.props||{},(p,m,...N)=>{const C=N.length?N[0]:m;return f.ctx&&s(f.ctx[p],f.ctx[p]=C)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](C),y&&an(e,p)),m}):[],f.update(),y=!0,de(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const p=xt(t.target);f.fragment&&f.fragment.l(p),p.forEach(H)}else f.fragment&&f.fragment.c();t.intro&&ee(e.$$.fragment),Ye(e,t.target,t.anchor),Ut()}Pe(h)}class Ke{constructor(){it(this,"$$");it(this,"$$set")}$destroy(){Me(this,1),this.$destroy=te}$on(t,n){if(!tt(n))return te;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!Jt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const cn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(cn);const Ne=[];function un(e,t){return{subscribe:dt(e,t).subscribe}}function dt(e,t=te){let n;const l=new Set;function s(u){if(Be(e,u)&&(e=u,n)){const h=!Ne.length;for(const f of l)f[1](),Ne.push(f,e);if(h){for(let f=0;f<Ne.length;f+=2)Ne[f][0](Ne[f+1]);Ne.length=0}}}function r(u){s(u(e))}function i(u,h=te){const f=[u,h];return l.add(f),l.size===1&&(n=t(s,r)||te),u(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:i}}function ut(e,t,n){const l=!Array.isArray(e),s=l?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return un(n,(i,u)=>{let h=!1;const f=[];let y=0,p=te;const m=()=>{if(y)return;p();const C=t(l?f[0]:f,i,u);r?i(C):p=tt(C)?C:te},N=s.map((C,I)=>We(C,A=>{f[I]=A,y&=~(1<<I),h&&m()},()=>{y|=1<<I}));return h=!0,m(),function(){de(N),p(),h=!1}})}function fn(e){const{subscribe:t,set:n,update:l}=dt(e());return{subscribe:t,set:n,update:l,reset:()=>n(e())}}function Ct(e,t,n){const l=e.slice();return l[7]=t[n],l}function Tt(e){let t,n=e[7]+"",l,s,r;function i(){return e[6](e[7])}return{c(){t=a("button"),l=D(n)},m(u,h){F(u,t,h),o(t,l),s||(r=$(t,"click",i),s=!0)},p(u,h){e=u,h&2&&n!==(n=e[7]+"")&&G(l,n)},d(u){u&&H(t),s=!1,r()}}}function hn(e){let t,n,l,s,r,i,u,h,f,y,p,m,N;const C=e[4].default,I=Gt(C,e,e[3],null);let A=be(e[1]),g=[];for(let b=0;b<A.length;b+=1)g[b]=Tt(Ct(e,A,b));return{c(){t=a("main"),n=a("header"),l=a("h3"),s=D(e[0]),r=d(),i=a("button"),i.textContent="ðŸ—™",u=d(),h=a("section"),I&&I.c(),f=d(),y=a("footer");for(let b=0;b<g.length;b+=1)g[b].c();c(l,"class","svelte-sijjgh"),c(n,"class","svelte-sijjgh"),c(h,"class","svelte-sijjgh"),c(y,"class","svelte-sijjgh"),c(t,"class","svelte-sijjgh")},m(b,j){F(b,t,j),o(t,n),o(n,l),o(l,s),o(n,r),o(n,i),o(t,u),o(t,h),I&&I.m(h,null),o(t,f),o(t,y);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(y,null);p=!0,m||(N=$(i,"click",e[5]),m=!0)},p(b,[j]){if((!p||j&1)&&G(s,b[0]),I&&I.p&&(!p||j&8)&&Xt(I,C,b,b[3],p?Kt(C,b[3],j,null):Zt(b[3]),null),j&6){A=be(b[1]);let k;for(k=0;k<A.length;k+=1){const E=Ct(b,A,k);g[k]?g[k].p(E,j):(g[k]=Tt(E),g[k].c(),g[k].m(y,null))}for(;k<g.length;k+=1)g[k].d(1);g.length=A.length}},i(b){p||(ee(I,b),p=!0)},o(b){he(I,b),p=!1},d(b){b&&H(t),I&&I.d(b),Je(g,b),m=!1,N()}}}function dn(e,t,n){let{$$slots:l={},$$scope:s}=t;const r=Rt();let{title:i}=t,{options:u=[]}=t;const h=()=>r("close"),f=y=>r("option"+y.replace(" ",""));return e.$$set=y=>{"title"in y&&n(0,i=y.title),"options"in y&&n(1,u=y.options),"$$scope"in y&&n(3,s=y.$$scope)},[i,u,r,s,l,h,f]}class pn extends Ke{constructor(t){super(),Ge(this,t,dn,hn,Be,{title:0,options:1})}}function jt(e,t,n){const l=e.slice();return l[24]=t[n],l}function gn(e){let t,n=be(e[0].keys.split(",")),l=[];for(let s=0;s<n.length;s+=1)l[s]=St(jt(e,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=Ve()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);F(s,t,r)},p(s,r){if(r&1){n=be(s[0].keys.split(","));let i;for(i=0;i<n.length;i+=1){const u=jt(s,n,i);l[i]?l[i].p(u,r):(l[i]=St(u),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&H(t),Je(l,s)}}}function mn(e){let t;return{c(){t=a("em"),t.textContent="No Triggers!"},m(n,l){F(n,t,l)},p:te,d(n){n&&H(t)}}}function _n(e){let t,n,l;return{c(){t=a("input"),c(t,"type","text"),c(t,"class","svelte-1r0ipbd")},m(s,r){F(s,t,r),x(t,e[0].keys),n||(l=[$(t,"input",e[15]),$(t,"focusout",e[16])],n=!0)},p(s,r){r&1&&t.value!==s[0].keys&&x(t,s[0].keys)},d(s){s&&H(t),n=!1,de(l)}}}function St(e){let t,n=e[24]+"",l;return{c(){t=a("kbd"),l=D(n),c(t,"class","svelte-1r0ipbd")},m(s,r){F(s,t,r),o(t,l)},p(s,r){r&1&&n!==(n=s[24]+"")&&G(l,n)},d(s){s&&H(t)}}}function $t(e){let t,n,l,s=e[0].description.length+"",r,i,u=e[0].description.length===1?"":"s",h,f,y;return{c(){t=a("textarea"),n=d(),l=a("small"),r=D(s),i=D(" character"),h=D(u),c(t,"class","description svelte-1r0ipbd")},m(p,m){F(p,t,m),x(t,e[0].description),F(p,n,m),F(p,l,m),o(l,r),o(l,i),o(l,h),f||(y=[$(t,"input",e[19]),$(t,"focusout",e[20])],f=!0)},p(p,m){m&1&&x(t,p[0].description),m&1&&s!==(s=p[0].description.length+"")&&G(r,s),m&1&&u!==(u=p[0].description.length===1?"":"s")&&G(h,u)},d(p){p&&(H(t),H(n),H(l)),f=!1,de(y)}}}function Et(e){let t,n;return t=new pn({props:{title:"Delete card '"+e[0].title+"'?",options:["Yes","No"],$$slots:{default:[bn]},$$scope:{ctx:e}}}),t.$on("optionYes",e[21]),t.$on("optionNo",e[22]),t.$on("close",e[23]),{c(){ze(t.$$.fragment)},m(l,s){Ye(t,l,s),n=!0},p(l,s){const r={};s&1&&(r.title="Delete card '"+l[0].title+"'?"),s&134217728&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){n||(ee(t.$$.fragment,l),n=!0)},o(l){he(t.$$.fragment,l),n=!1},d(l){Me(t,l)}}}function bn(e){let t;return{c(){t=a("p"),t.textContent="Are you sure you want to delete this card?"},m(n,l){F(n,t,l)},p:te,d(n){n&&H(t)}}}function yn(e){let t,n,l,s,r,i,u,h,f,y,p,m,N,C=e[3]?"â†™":"â†—",I,A,g,b,j,k=e[0].value.length+"",E,V,q=e[0].value.length===1?"":"s",z,U,M,Y,B,_,K,L=e[1]?"âœ”":"âœŽ",v,S,w,ne=e[2]?"Hide":"Show",ce,me,ue,P,pe,W,ye,ae;function we(T,O){return T[1]?_n:T[0].keys.length===0?mn:gn}let oe=we(e),X=oe(e),J=e[2]&&$t(e),R=e[4]&&Et(e);return{c(){t=a("section"),n=a("header"),l=a("button"),l.textContent="ðŸ—‘",s=d(),r=a("button"),i=D("âœ¨"),h=d(),f=a("h3"),f.textContent="Placeholder Title",y=d(),p=a("span"),p.textContent="Placeholder Type",m=d(),N=a("button"),I=D(C),A=d(),g=a("textarea"),b=d(),j=a("small"),E=D(k),V=D(" character"),z=D(q),U=d(),M=a("div"),Y=a("h4"),Y.textContent="Triggers:",B=d(),X.c(),_=d(),K=a("button"),v=D(L),S=d(),w=a("button"),ce=D(ne),me=D(`
            Description`),ue=d(),J&&J.c(),P=d(),R&&R.c(),pe=Ve(),c(l,"title","Delete story card"),c(r,"title",u="Use for Character Creator [currently "+e[0].useForCharacterCreation+"]"),c(r,"class","svelte-1r0ipbd"),je(r,"is_cc",e[0].useForCharacterCreation),c(f,"contenteditable","true"),c(f,"class","title svelte-1r0ipbd"),e[0].title===void 0&&Fe(()=>e[8].call(f)),c(p,"contenteditable","true"),c(p,"class","type svelte-1r0ipbd"),e[0].type===void 0&&Fe(()=>e[10].call(p)),c(n,"class","svelte-1r0ipbd"),c(g,"class","value svelte-1r0ipbd"),c(Y,"class","svelte-1r0ipbd"),c(K,"class","svelte-1r0ipbd"),c(w,"class","svelte-1r0ipbd"),c(M,"class","triggers svelte-1r0ipbd"),c(t,"class","svelte-1r0ipbd"),je(t,"fullScreen",e[3])},m(T,O){F(T,t,O),o(t,n),o(n,l),o(n,s),o(n,r),o(r,i),o(n,h),o(n,f),e[0].title!==void 0&&(f.innerText=e[0].title),o(n,y),o(n,p),e[0].type!==void 0&&(p.innerText=e[0].type),o(n,m),o(n,N),o(N,I),o(t,A),o(t,g),x(g,e[0].value),o(t,b),o(t,j),o(j,E),o(j,V),o(j,z),o(t,U),o(t,M),o(M,Y),o(M,B),X.m(M,null),o(M,_),o(M,K),o(K,v),o(M,S),o(M,w),o(w,ce),o(w,me),o(t,ue),J&&J.m(t,null),F(T,P,O),R&&R.m(T,O),F(T,pe,O),W=!0,ye||(ae=[$(l,"click",e[6]),$(r,"click",e[7]),$(f,"input",e[8]),$(f,"focusout",e[9]),$(p,"input",e[10]),$(p,"focusout",e[11]),$(N,"click",e[12]),$(g,"input",e[13]),$(g,"focusout",e[14]),$(K,"click",e[17]),$(w,"click",e[18])],ye=!0)},p(T,[O]){(!W||O&1&&u!==(u="Use for Character Creator [currently "+T[0].useForCharacterCreation+"]"))&&c(r,"title",u),(!W||O&1)&&je(r,"is_cc",T[0].useForCharacterCreation),O&1&&T[0].title!==f.innerText&&(f.innerText=T[0].title),O&1&&T[0].type!==p.innerText&&(p.innerText=T[0].type),(!W||O&8)&&C!==(C=T[3]?"â†™":"â†—")&&G(I,C),O&1&&x(g,T[0].value),(!W||O&1)&&k!==(k=T[0].value.length+"")&&G(E,k),(!W||O&1)&&q!==(q=T[0].value.length===1?"":"s")&&G(z,q),oe===(oe=we(T))&&X?X.p(T,O):(X.d(1),X=oe(T),X&&(X.c(),X.m(M,_))),(!W||O&2)&&L!==(L=T[1]?"âœ”":"âœŽ")&&G(v,L),(!W||O&4)&&ne!==(ne=T[2]?"Hide":"Show")&&G(ce,ne),T[2]?J?J.p(T,O):(J=$t(T),J.c(),J.m(t,null)):J&&(J.d(1),J=null),(!W||O&8)&&je(t,"fullScreen",T[3]),T[4]?R?(R.p(T,O),O&16&&ee(R,1)):(R=Et(T),R.c(),ee(R,1),R.m(pe.parentNode,pe)):R&&(ft(),he(R,1,1,()=>{R=null}),ht())},i(T){W||(ee(R),W=!0)},o(T){he(R),W=!1},d(T){T&&(H(t),H(P),H(pe)),X.d(),J&&J.d(),R&&R.d(T),ye=!1,de(ae)}}}function vn(e,t,n){const l=Rt();let{card:s}=t,r=!1,i=!1,u=!1,h=!1;const f=()=>n(4,h=!0),y=()=>{n(0,s.useForCharacterCreation=!s.useForCharacterCreation,s)};function p(){s.title=this.innerText,n(0,s)}const m=()=>l("update");function N(){s.type=this.innerText,n(0,s)}const C=()=>l("update"),I=()=>{n(3,u=!u)};function A(){s.value=this.value,n(0,s)}const g=()=>l("update");function b(){s.keys=this.value,n(0,s)}const j=()=>l("update"),k=()=>{n(1,r=!r)},E=()=>{n(2,i=!i)};function V(){s.description=this.value,n(0,s)}const q=()=>l("update"),z=()=>{l("delete"),n(4,h=!1)},U=()=>n(4,h=!1),M=()=>n(4,h=!1);return e.$$set=Y=>{"card"in Y&&n(0,s=Y.card)},[s,r,i,u,h,l,f,y,p,m,N,C,I,A,g,b,j,k,E,V,q,z,U,M]}class Pt extends Ke{constructor(t){super(),Ge(this,t,vn,yn,Be,{card:0})}}function It(e){let t,n,l,s,r,i,u,h,f,y,p,m,N,C,I,A,g,b,j,k,E,V,q,z,U,M,Y,B,_,K,L,v,S,w,ne,ce,me,ue,P,pe,W,ye,ae,we,oe,X,J,R,T,O,_e,fe,Se,Ce,$e,ve,re,Ee,ke,Re;return U=new Pt({props:{card:e[1]}}),{c(){t=a("section"),n=a("article"),l=a("h2"),l.textContent="What is all of this?",s=d(),r=a("button"),r.textContent="Oh no, text! Take me back!",i=d(),u=a("p"),u.innerHTML=`This is a tool for use with <a target="_blank" href="https://play.aidungeon.com/" class="svelte-1jxmbfm">AI Dungeon&#39;s</a> Story
                Cards. Story cards are chunks of text that provide additional details to the AI when one of the trigger
                words listed is mentioned. These trigger words are not case sensitive, but do take things like spaces
                into account. Since the native tools can become a bit tedious for large batches of story cards, and
                since AI Dungeon lets you export them and import them again, this tool tries to offer as many missing
                features as possible.`,h=d(),f=a("h3"),f.textContent="How do I get the cards?",y=d(),p=a("p"),p.textContent=`In the [...] menu of your scenario or adventure, there should be an Edit option. There should also be an
                Edit button on the scenario or adventure's page. Clicking that will open a nice pop-up that gives you
                access to the behind-the-scenes stuff. On the Details tab, scroll down to the bottom and you should see
                a section labeled Story Card Management (if you're on mobile, it may ask you to use your browser for
                this: go ahead and switch). Click the gray Export button to get your cards!`,m=d(),N=a("p"),N.textContent=`Alternatively, you can build everything right here! There's an Add Card button next to the file upload
                button in the header area. Clicking that will create a blank card and add it to the working set.`,C=d(),I=a("h3"),I.textContent="And how do I load my changes?",A=d(),g=a("p"),g.textContent=`It's the same thing, except click the scary red Import button and upload the edited file! You can save
                your changes here by clicking the Save button in the header: this will download a JSON file that you can
                import. Note that importing story cards will OVERWRITE ALL YOUR EXISTING CARDS IN THE STORY, so be SURE
                you select the right scenario/adventure/file when importing!`,b=d(),j=a("h3"),j.textContent="That's good and all, but how do I edit a story card?",k=d(),E=a("p"),E.textContent=`Each card pops up with a little editor window. Any changes you make here will instantly update the JSON,
                and when you're satisfied with your changes you can save the file as described above.`,V=d(),q=a("p"),q.textContent="Here's a sample you can play with. Editing this won't affect anything you have loaded.",z=d(),ze(U.$$.fragment),M=d(),Y=a("p"),Y.textContent="Some points to note:",B=d(),_=a("ul"),_.innerHTML=`<li>The ðŸ—‘ icon button lets you delete a story card. It pops up a nice big warning message asking if
                    you&#39;re sure, just to be safe. Clicking yes on the sample card won&#39;t have any effect, but on real
                    cards it will remove it from the set.</li> <li>The âœ¨ icon button shows whether the card is visible in Character Creation. It&#39;s highlighted orange
                    if so, and shows the normal color if not. If you don&#39;t use Character Creation, you can ignore this:
                    cards will always have this enabled by default, and it doesn&#39;t affect gameplay.</li> <li>The default card types are <kbd>location</kbd>, <kbd>faction</kbd>, <kbd>class</kbd>, and
                    <kbd>race</kbd>
                    . All other card types will show up under Custom in AI Dungeon. Note that the filter
                    on here is case sensitive, so if you have <kbd>Spell</kbd> and <kbd>spell</kbd>, it will show twice
                    in the list.</li> <li>The triggers are split apart by default, preserving whitespace. When you click the edit button, it
                    will convert to the standard AI Dungeon format of a comma-separated list.</li> <li>The button in the top-right corner puts you into a full-screen editor. Clicking it again toggles it
                    back to normal.</li> <li>Most of the time, the description for a story card is meaningless. It is displayed for users if the
                    card is being used in a character creator scenario, but otherwise it&#39;s mostly used for notes. New
                    scenarios default this value to the same thing you enter in the main area. The editor hides it by
                    default, but you can click the Show Description (and subsequent Hide Description) button to toggle
                    it for the card.</li>`,K=d(),L=a("h3"),L.textContent="What's this about filters?",v=d(),S=a("p"),S.textContent=`Seeing all your cards at once might not be what you want, especially if you have dozens or even hundreds
                and want to find something specific. Filters stack on top of each other, meaning you can have multiple
                active at once and see where they overlap.`,w=d(),ne=a("ul"),ne.innerHTML=`<li><strong>Search Filters:</strong> You can search for text (case-insensitive) within the card title,
                    entry (the part that gets sent to the AI), or triggers (the part the AI uses to add a card to the
                    context). Remember, the AI is case-insensitive too!</li> <li><strong>Card Type:</strong> You can choose to view cards that match specific types. If you want to
                    quickly deselect all of them, click Clear Types. The list is multiple-selection, which means you
                    can have more than one type active at once.</li> <li>When you&#39;re done, you can click <strong>Clear Filters</strong> to reset to the defaults.</li>`,ce=d(),me=a("p"),me.textContent="You can also sort the cards in a few ways:",ue=d(),P=a("ul"),P.innerHTML=`<li><strong>Alphabetically:</strong> Sort by card title in alphabetical order.</li> <li><strong>By type:</strong> Sort by card type in alphabetical order.</li> <li><strong>By entry length:</strong> Sort by the length of the entry text. Useful for finding overly
                    short or long cards.</li>`,pe=d(),W=a("p"),W.textContent="To change the sort direction, click the Sort Ascending (or Sort Descending) button.",ye=d(),ae=a("p"),ae.textContent="You can also show cards that match some common errors or oversights:",we=d(),oe=a("ul"),oe.innerHTML=`<li><strong>Empty triggers:</strong> This will show cards that trigger on whitespace, or on empty text.
                    The AI will generally ALWAYS load these cards. It will also match cards with no triggers: this will
                    have the opposite effect, where the AI will NEVER load these cards. Most of the time, this isn&#39;t
                    what you want.</li> <li><strong>No Character Creator description:</strong> <em>If you are using Character Creator,</em> then
                    it is good practice for every Character Creator card to have a description so players know what
                    their choice means from a story standpoint. It&#39;s not required, just nice. If you are NOT using
                    Character creator, you can ignore this. Note that it will also match cards with the default text of
                    <kbd>Notes go here.</kbd>.</li>`,X=d(),J=a("h3"),J.textContent="Speaking of triggers, what's that Show Triggers button do?",R=d(),T=a("p"),T.textContent=`It displays all the triggers for all the cards in a single chunk. If you have a big story, this can be
                a LOT of data, which is why it's hidden by default. But it does highlight in red any time you have more
                than one card mapped to a trigger, and orange any time another trigger overlaps that trigger (for
                instance, "half-elf" overlapping "elf"). If something doesn't look right, you can click on the trigger
                to show the card that uses it (replacing the Trigger search with that trigger).`,O=d(),_e=a("h3"),_e.textContent="Something's broken/I have a cool idea/I just wanna say thanks",fe=d(),Se=a("p"),Se.innerHTML=`Hop in the <a target="_blank" href="https://discord.com/invite/HB2YBZYjyf" class="svelte-1jxmbfm">AI Dungeon Discord server</a>
                and check out the
                <a target="_blank" href="https://discord.com/channels/903327676884979802/1214767285655576696" class="svelte-1jxmbfm">thread
                under the sharing section</a> to give any feedback! You can also
                <a target="_blank" href="https://github.com/ndm13/aid-json-helper/issues" class="svelte-1jxmbfm">open an issue</a> on the
                project&#39;s <a target="_blank" href="https://github.com/ndm13/aid-json-helper/" class="svelte-1jxmbfm">GitHub page</a>, but
                there&#39;s no guarantee I&#39;ll get to it in a timely manner. This is a very casual project for me, but when
                the community is engaged it motivates me to work on it.`,Ce=d(),$e=a("p"),$e.textContent=`The more technical questions (how it's built/deployed/developed) are probably answered on that GitHub
                page too.`,ve=d(),re=a("button"),re.textContent="Okay, got it!",c(u,"class","svelte-1jxmbfm"),c(p,"class","svelte-1jxmbfm"),c(N,"class","svelte-1jxmbfm"),c(g,"class","svelte-1jxmbfm"),c(E,"class","svelte-1jxmbfm"),c(q,"class","svelte-1jxmbfm"),c(Y,"class","svelte-1jxmbfm"),c(_,"class","svelte-1jxmbfm"),c(S,"class","svelte-1jxmbfm"),c(ne,"class","svelte-1jxmbfm"),c(me,"class","svelte-1jxmbfm"),c(P,"class","svelte-1jxmbfm"),c(W,"class","svelte-1jxmbfm"),c(ae,"class","svelte-1jxmbfm"),c(oe,"class","svelte-1jxmbfm"),c(T,"class","svelte-1jxmbfm"),c(Se,"class","svelte-1jxmbfm"),c($e,"class","svelte-1jxmbfm"),c(n,"class","svelte-1jxmbfm"),c(t,"class","svelte-1jxmbfm")},m(ge,Xe){F(ge,t,Xe),o(t,n),o(n,l),o(n,s),o(n,r),o(n,i),o(n,u),o(n,h),o(n,f),o(n,y),o(n,p),o(n,m),o(n,N),o(n,C),o(n,I),o(n,A),o(n,g),o(n,b),o(n,j),o(n,k),o(n,E),o(n,V),o(n,q),o(n,z),Ye(U,n,null),o(n,M),o(n,Y),o(n,B),o(n,_),o(n,K),o(n,L),o(n,v),o(n,S),o(n,w),o(n,ne),o(n,ce),o(n,me),o(n,ue),o(n,P),o(n,pe),o(n,W),o(n,ye),o(n,ae),o(n,we),o(n,oe),o(n,X),o(n,J),o(n,R),o(n,T),o(n,O),o(n,_e),o(n,fe),o(n,Se),o(n,Ce),o(n,$e),o(n,ve),o(n,re),Ee=!0,ke||(Re=[$(r,"click",e[3]),$(re,"click",e[4])],ke=!0)},p:te,i(ge){Ee||(ee(U.$$.fragment,ge),Ee=!0)},o(ge){he(U.$$.fragment,ge),Ee=!1},d(ge){ge&&H(t),Me(U),ke=!1,de(Re)}}}function kn(e){let t,n,l,s,r,i,u=e[0]&&It(e);return{c(){t=a("button"),t.textContent="What is all of this?",n=d(),u&&u.c(),l=Ve()},m(h,f){F(h,t,f),F(h,n,f),u&&u.m(h,f),F(h,l,f),s=!0,r||(i=$(t,"click",e[2]),r=!0)},p(h,[f]){h[0]?u?(u.p(h,f),f&1&&ee(u,1)):(u=It(h),u.c(),ee(u,1),u.m(l.parentNode,l)):u&&(ft(),he(u,1,1,()=>{u=null}),ht())},i(h){s||(ee(u),s=!0)},o(h){he(u),s=!1},d(h){h&&(H(t),H(n),H(l)),u&&u.d(h),r=!1,i()}}}function wn(e,t,n){let l=!1;return[l,{title:"Title of Your Card",value:"This is the part that gets sent to the AI.",useForCharacterCreation:!0,keys:"words,that,trigger,the ai,and can include, leading,and trailing ,spaces",description:"This is the part that gets shown to the user in Character Creator, or a space for notes.",type:"Card Type"},()=>n(0,l=!0),()=>n(0,l=!1),()=>n(0,l=!1)]}class Cn extends Ke{constructor(t){super(),Ge(this,t,wn,kn,Be,{})}}function At(e,t,n){const l=e.slice();return l[22]=t[n],l}function Lt(e,t,n){const l=e.slice();return l[25]=t[n],l}function Ot(e){let t,n=e[25]+"",l,s;return{c(){t=a("option"),l=D(n),t.selected=!0,t.__value=s=e[25],x(t,t.__value)},m(r,i){F(r,t,i),o(t,l)},p(r,i){i&16&&n!==(n=r[25]+"")&&G(l,n),i&16&&s!==(s=r[25])&&(t.__value=s,x(t,t.__value))},d(r){r&&H(t)}}}function Nt(e){let t,n=be(e[5]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Dt(At(e,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=Ve()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);F(s,t,r)},p(s,r){if(r&42){n=be(s[5]);let i;for(i=0;i<n.length;i+=1){const u=At(s,n,i);l[i]?l[i].p(u,r):(l[i]=Dt(u),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&H(t),Je(l,s)}}}function Dt(e){let t,n=e[22].key+"",l,s=e[22].count>1?" x"+e[22].count:"",r,i=e[22].overlap>0?" +"+e[22].overlap:"",u,h,f;function y(){return e[20](e[22])}return{c(){t=a("kbd"),l=D(n),r=D(s),u=D(i),c(t,"class","svelte-84selk"),je(t,"plural",e[22].count>1),je(t,"overlap",e[22].overlap>0)},m(p,m){F(p,t,m),o(t,l),o(t,r),o(t,u),h||(f=$(t,"click",y),h=!0)},p(p,m){e=p,m&32&&n!==(n=e[22].key+"")&&G(l,n),m&32&&s!==(s=e[22].count>1?" x"+e[22].count:"")&&G(r,s),m&32&&i!==(i=e[22].overlap>0?" +"+e[22].overlap:"")&&G(u,i),m&32&&je(t,"plural",e[22].count>1),m&32&&je(t,"overlap",e[22].overlap>0)},d(p){p&&H(t),h=!1,f()}}}function Tn(e){let t,n,l,s,r,i,u,h,f,y,p,m,N,C,I,A,g,b,j,k,E,V,q,z,U,M,Y,B,_,K,L,v,S,w,ne,ce,me,ue,P,pe,W,ye,ae,we,oe=e[3].sort.asc?"Descending":"Ascending",X,J,R,T,O,_e,fe,Se,Ce,$e,ve,re,Ee,ke,Re,ge,Xe,Ue,pt,nt,Ie,Ze=e[2]?"Hide":"Show",lt,gt,Qe=Object.keys(e[5]).length+"",st,mt,ot,rt,_t,Le=be(e[4]),le=[];for(let se=0;se<Le.length;se+=1)le[se]=Ot(Lt(e,Le,se));let ie=e[2]&&Nt(e);return ot=Qt(e[14][0]),{c(){t=a("nav"),n=a("section"),l=a("fieldset"),s=a("label"),s.textContent="Title:",r=d(),i=a("input"),u=d(),h=a("label"),h.textContent="Entry:",f=d(),y=a("input"),p=d(),m=a("label"),m.textContent="Trigger:",N=d(),C=a("input"),I=d(),A=a("fieldset"),g=a("label"),g.textContent="Type:",b=d(),j=a("select");for(let se=0;se<le.length;se+=1)le[se].c();k=d(),E=a("button"),E.textContent="Clear Types",V=d(),q=a("button"),q.textContent="Clear filters",z=d(),U=a("small"),U.textContent="Sort:",M=d(),Y=a("section"),B=a("span"),_=a("input"),K=d(),L=a("label"),L.textContent="Alphabetically",v=d(),S=a("span"),w=a("input"),ne=d(),ce=a("label"),ce.textContent="By type",me=d(),ue=a("span"),P=a("input"),pe=d(),W=a("label"),W.textContent="By entry length",ye=d(),ae=a("button"),we=D("Sort "),X=D(oe),J=d(),R=a("small"),R.textContent="Common Errors:",T=d(),O=a("section"),_e=a("span"),fe=a("input"),Se=d(),Ce=a("label"),Ce.textContent="Empty triggers",$e=d(),ve=a("span"),re=a("input"),Ee=d(),ke=a("label"),ke.textContent="No Character Creator description",Re=d(),ge=a("small"),ge.textContent="Triggers:",Xe=d(),Ue=a("section"),ie&&ie.c(),pt=d(),nt=a("span"),Ie=a("button"),lt=D(Ze),gt=D(" Triggers ("),st=D(Qe),mt=D(")"),c(s,"for","title"),c(s,"class","svelte-84selk"),c(i,"name","title"),c(i,"id","title"),c(h,"for","entry"),c(h,"class","svelte-84selk"),c(y,"name","entry"),c(y,"id","entry"),c(m,"for","triggers"),c(m,"class","svelte-84selk"),c(C,"name","triggers"),c(C,"id","triggers"),c(l,"class","searchWithin svelte-84selk"),c(g,"for","type"),c(g,"class","svelte-84selk"),c(j,"name","type"),j.multiple=!0,e[3].types===void 0&&Fe(()=>e[11].call(j)),c(A,"class","type svelte-84selk"),c(n,"class","filter svelte-84selk"),c(_,"type","radio"),c(_,"id","alpha"),c(_,"name","sort"),_.__value="alpha",x(_,_.__value),c(L,"for","alpha"),c(L,"class","svelte-84selk"),c(B,"class","svelte-84selk"),c(w,"type","radio"),c(w,"id","type"),c(w,"name","sort"),w.__value="type",x(w,w.__value),c(ce,"for","type"),c(ce,"class","svelte-84selk"),c(S,"class","svelte-84selk"),c(P,"type","radio"),c(P,"id","length"),c(P,"name","sort"),P.__value="length",x(P,P.__value),c(W,"for","length"),c(W,"class","svelte-84selk"),c(ue,"class","svelte-84selk"),c(Y,"class","sort svelte-84selk"),c(fe,"title","Shows cards with empty or missing triggers. Empty triggers will cause cards to trigger constantly, while missing triggers will cause them to never trigger."),c(fe,"type","checkbox"),c(fe,"id","empty"),c(fe,"name","empty"),c(Ce,"for","empty"),c(Ce,"class","svelte-84selk"),c(_e,"class","svelte-84selk"),c(re,"title","Shows cards that are shown in character creator, but have no description. This only applies if you use character creator!"),c(re,"type","checkbox"),c(re,"id","noDescription"),c(re,"name","noDescription"),c(ke,"for","noDescription"),c(ke,"class","svelte-84selk"),c(ve,"class","svelte-84selk"),c(O,"class","issues svelte-84selk"),c(Ue,"class","triggers svelte-84selk"),c(t,"class","svelte-84selk"),ot.p(_,w,P)},m(se,Z){F(se,t,Z),o(t,n),o(n,l),o(l,s),o(l,r),o(l,i),x(i,e[3].title),o(l,u),o(l,h),o(l,f),o(l,y),x(y,e[3].value),o(l,p),o(l,m),o(l,N),o(l,C),x(C,e[3].key),o(n,I),o(n,A),o(A,g),o(A,b),o(A,j);for(let Q=0;Q<le.length;Q+=1)le[Q]&&le[Q].m(j,null);vt(j,e[3].types),o(A,k),o(A,E),o(n,V),o(n,q),o(t,z),o(t,U),o(t,M),o(t,Y),o(Y,B),o(B,_),_.checked=_.__value===e[3].sort.mode,o(B,K),o(B,L),o(Y,v),o(Y,S),o(S,w),w.checked=w.__value===e[3].sort.mode,o(S,ne),o(S,ce),o(Y,me),o(Y,ue),o(ue,P),P.checked=P.__value===e[3].sort.mode,o(ue,pe),o(ue,W),o(Y,ye),o(Y,ae),o(ae,we),o(ae,X),o(t,J),o(t,R),o(t,T),o(t,O),o(O,_e),o(_e,fe),fe.checked=e[3].empty,o(_e,Se),o(_e,Ce),o(O,$e),o(O,ve),o(ve,re),re.checked=e[3].noDescription,o(ve,Ee),o(ve,ke),o(t,Re),o(t,ge),o(t,Xe),o(t,Ue),ie&&ie.m(Ue,null),o(t,pt),o(t,nt),o(nt,Ie),o(Ie,lt),o(Ie,gt),o(Ie,st),o(Ie,mt),rt||(_t=[$(i,"input",e[8]),$(y,"input",e[9]),$(C,"input",e[10]),$(j,"change",e[11]),$(E,"click",e[12]),$(q,"click",function(){tt(e[1].reset)&&e[1].reset.apply(this,arguments)}),$(_,"change",e[13]),$(w,"change",e[15]),$(P,"change",e[16]),$(ae,"click",e[17]),$(fe,"change",e[18]),$(re,"change",e[19]),$(Ie,"click",e[21])],rt=!0)},p(se,[Z]){if(e=se,Z&24&&i.value!==e[3].title&&x(i,e[3].title),Z&24&&y.value!==e[3].value&&x(y,e[3].value),Z&24&&C.value!==e[3].key&&x(C,e[3].key),Z&16){Le=be(e[4]);let Q;for(Q=0;Q<Le.length;Q+=1){const bt=Lt(e,Le,Q);le[Q]?le[Q].p(bt,Z):(le[Q]=Ot(bt),le[Q].c(),le[Q].m(j,null))}for(;Q<le.length;Q+=1)le[Q].d(1);le.length=Le.length}Z&24&&vt(j,e[3].types),Z&24&&(_.checked=_.__value===e[3].sort.mode),Z&24&&(w.checked=w.__value===e[3].sort.mode),Z&24&&(P.checked=P.__value===e[3].sort.mode),Z&8&&oe!==(oe=e[3].sort.asc?"Descending":"Ascending")&&G(X,oe),Z&24&&(fe.checked=e[3].empty),Z&24&&(re.checked=e[3].noDescription),e[2]?ie?ie.p(e,Z):(ie=Nt(e),ie.c(),ie.m(Ue,null)):ie&&(ie.d(1),ie=null),Z&4&&Ze!==(Ze=e[2]?"Hide":"Show")&&G(lt,Ze),Z&32&&Qe!==(Qe=Object.keys(e[5]).length+"")&&G(st,Qe)},i:te,o:te,d(se){se&&H(t),Je(le,se),ie&&ie.d(),ot.r(),rt=!1,de(_t)}}}function jn(e,t,n){let l,s=te,r=()=>(s(),s=We(m,_=>n(3,l=_)),m),i,u=te,h=()=>(u(),u=We(p,_=>n(4,i=_)),p),f;e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>u());let{cards:y,types:p,filter:m}=t;h(),r();const N=ut(y,_=>{const K=_.map(v=>v.keys.split(",")).reduce((v,S)=>(S.forEach(w=>v[w]?v[w].count++:v[w]={count:1}),v),{}),L=Object.keys(K);return L.forEach(v=>K[v].overlap=L.filter(S=>S.indexOf(v)>-1&&v!==S).length),Object.entries(K).map(([v,S])=>(S.key=v,S))});xe(e,N,_=>n(5,f=_));let C=!1;const I=[[]];function A(){l.title=this.value,m.set(l)}function g(){l.value=this.value,m.set(l)}function b(){l.key=this.value,m.set(l)}function j(){l.types=en(this),m.set(l)}const k=()=>Te(m,l.types.length=0,l);function E(){l.sort.mode=this.__value,m.set(l)}function V(){l.sort.mode=this.__value,m.set(l)}function q(){l.sort.mode=this.__value,m.set(l)}const z=()=>Te(m,l.sort.asc=!l.sort.asc,l);function U(){l.empty=this.checked,m.set(l)}function M(){l.noDescription=this.checked,m.set(l)}const Y=_=>{m.reset(),_.key===""?Te(m,l.empty=!0,l):Te(m,l.key=_.key,l)},B=()=>n(2,C=!C);return e.$$set=_=>{"cards"in _&&n(7,y=_.cards),"types"in _&&h(n(0,p=_.types)),"filter"in _&&r(n(1,m=_.filter))},[p,m,C,l,i,f,N,y,A,g,b,j,k,E,I,V,q,z,U,M,Y,B]}class Sn extends Ke{constructor(t){super(),Ge(this,t,jn,Tn,Be,{cards:7,types:0,filter:1})}}function $n(){return{keys:"",value:"",type:"placeholder",description:"",useForCharacterCreation:!0,title:"New Card"}}function En(e){return()=>({title:"",value:"",key:"",types:Vt(e),empty:!1,noDescription:!1,sort:{mode:"default",asc:!0}})}function Ht(e,t,n){const l=e.slice();return l[14]=t[n],l}function Ft(e){let t;function n(r,i){return r[1].length===0?Ln:r[2].empty||r[2].noDescription?An:In}let l=n(e),s=l(e);return{c(){s.c(),t=Ve()},m(r,i){s.m(r,i),F(r,t,i)},p(r,i){l!==(l=n(r))&&(s.d(1),s=l(r),s&&(s.c(),s.m(t.parentNode,t)))},d(r){r&&H(t),s.d(r)}}}function In(e){let t;return{c(){t=a("p"),t.textContent=`You've filtered everything out! To reset, click the "Clear Filters" button!`},m(n,l){F(n,t,l)},d(n){n&&H(t)}}}function An(e){let t;return{c(){t=a("p"),t.textContent="No errors found! You're good!"},m(n,l){F(n,t,l)},d(n){n&&H(t)}}}function Ln(e){let t;return{c(){t=a("p"),t.textContent=`Load some story cards to get started! Open a scenario or adventure, go to Edit > Details > Story Card
                Management, and export your story cards! When you're done editing, you can save them here and import
                them again in the same section.
            `},m(n,l){F(n,t,l)},d(n){n&&H(t)}}}function Yt(e){let t,n;function l(){return e[13](e[14])}return t=new Pt({props:{card:e[14]}}),t.$on("update",e[12]),t.$on("delete",l),{c(){ze(t.$$.fragment)},m(s,r){Ye(t,s,r),n=!0},p(s,r){e=s;const i={};r&8&&(i.card=e[14]),t.$set(i)},i(s){n||(ee(t.$$.fragment,s),n=!0)},o(s){he(t.$$.fragment,s),n=!1},d(s){Me(t,s)}}}function On(e){let t,n,l,s,r,i,u,h,f,y,p,m,N,C,I,A=e[3].length+"",g,b,j=e[1].length+"",k,E,V,q,z,U,M,Y;r=new Cn({}),V=new Sn({props:{cards:e[4],types:e[5],filter:e[6]}});let B=be(e[3]),_=[];for(let v=0;v<B.length;v+=1)_[v]=Yt(Ht(e,B,v));const K=v=>he(_[v],1,1,()=>{_[v]=null});let L=null;return B.length||(L=Ft(e)),{c(){t=a("header"),n=a("h2"),n.textContent="Story Card Viewer/Editor",l=d(),s=a("span"),ze(r.$$.fragment),i=d(),u=a("section"),h=a("button"),h.textContent="Add Card",f=d(),y=a("input"),p=d(),m=a("button"),m.textContent="Save",N=d(),C=a("em"),I=D("Showing "),g=D(A),b=D(" entries out of "),k=D(j),E=d(),ze(V.$$.fragment),q=d(),z=a("main");for(let v=0;v<_.length;v+=1)_[v].c();L&&L.c(),c(s,"class","helpbox svelte-xugekk"),c(y,"accept","application/json,text/json,.json"),c(y,"type","file"),c(u,"class","io svelte-xugekk"),c(t,"class","svelte-xugekk"),c(z,"class","svelte-xugekk")},m(v,S){F(v,t,S),o(t,n),o(t,l),o(t,s),Ye(r,s,null),o(t,i),o(t,u),o(u,h),o(u,f),o(u,y),o(u,p),o(u,m),o(t,N),o(t,C),o(C,I),o(C,g),o(C,b),o(C,k),F(v,E,S),Ye(V,v,S),F(v,q,S),F(v,z,S);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(z,null);L&&L.m(z,null),U=!0,M||(Y=[$(h,"click",e[10]),$(y,"change",e[11]),$(y,"change",e[8]),$(m,"click",e[9])],M=!0)},p(v,[S]){if((!U||S&8)&&A!==(A=v[3].length+"")&&G(g,A),(!U||S&2)&&j!==(j=v[1].length+"")&&G(k,j),S&30){B=be(v[3]);let w;for(w=0;w<B.length;w+=1){const ne=Ht(v,B,w);_[w]?(_[w].p(ne,S),ee(_[w],1)):(_[w]=Yt(ne),_[w].c(),ee(_[w],1),_[w].m(z,null))}for(ft(),w=B.length;w<_.length;w+=1)K(w);ht(),!B.length&&L?L.p(v,S):B.length?L&&(L.d(1),L=null):(L=Ft(v),L.c(),L.m(z,null))}},i(v){if(!U){ee(r.$$.fragment,v),ee(V.$$.fragment,v);for(let S=0;S<B.length;S+=1)ee(_[S]);U=!0}},o(v){he(r.$$.fragment,v),he(V.$$.fragment,v),_=_.filter(Boolean);for(let S=0;S<_.length;S+=1)he(_[S]);U=!1},d(v){v&&(H(t),H(E),H(q),H(z)),Me(r),Me(V,v),Je(_,v),L&&L.d(),M=!1,de(Y)}}}function Nn(e,t,n){let l,s,r;const i=dt([]);xe(e,i,g=>n(1,l=g));const u=ut(i,g=>[...new Set(g.map(b=>b.type))]),h=fn(En(u));xe(e,h,g=>n(2,s=g));const f=ut([i,h],([g,b])=>{let j=g.filter(k=>b.types.indexOf(k.type)>-1&&k.title.toLowerCase().indexOf(b.title.toLowerCase())>-1&&k.value.toLowerCase().indexOf(b.value.toLowerCase())>-1&&k.keys.split(",").filter(E=>E.toLowerCase().indexOf(b.key.toLowerCase())>-1).length>0).filter(k=>!b.empty&&!b.noDescription||b.empty&&k.keys.split(",").filter(E=>/^\s*$/gm.test(E)).length>0||b.noDescription&&k.useForCharacterCreation==!0&&/^(\s*|Notes go here.)$/gm.test(k.description));return b.sort.mode==="default"?j:j.sort((k,E)=>{switch(b.sort.mode){case"alpha":return(b.sort.asc?k.title.toLowerCase()<E.title.toLowerCase():E.title.toLowerCase()<k.title.toLowerCase())?1:-1;case"type":return(b.sort.asc?k.type.toLowerCase()<E.type.toLowerCase():E.type.toLowerCase()<k.type.toLowerCase())?1:-1;case"length":return b.sort.asc?E.value.length-k.value.length:k.value.length-E.value.length}})});xe(e,f,g=>n(3,r=g));let y;async function p(){y&&await y[0].text().then(g=>JSON.parse(g)).then(g=>{Te(i,l=g,l),h.reset(),l.length===0&&alert("This file doesn't contain any story cards!  Make sure you have the right file.")}).catch(g=>{Te(i,l=[],l),alert("There was an error trying to load this file.  Are you sure it's valid?"),console.error("Caught error when updating file",g)})}function m(){const g=document.createElement("a"),b=URL.createObjectURL(new Blob([JSON.stringify(l)],{type:"application/json"}));g.download=y?y[0].name:"cards.json",g.href=b,g.click(),URL.revokeObjectURL(b)}const N=()=>{Te(i,l=[$n(),...l],l),s.types.indexOf("placeholder")>-1||Te(h,s.types=["placeholder",...s.types],s)};function C(){y=this.files,n(0,y)}return[y,l,s,r,i,u,h,f,p,m,N,C,()=>i.update(g=>g),g=>i.update(b=>b.filter(j=>j!==g))]}class Dn extends Ke{constructor(t){super(),Ge(this,t,Nn,On,Be,{})}}new Dn({target:document.getElementById("app")});
